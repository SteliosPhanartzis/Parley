(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{74:function(e,n,c){},75:function(e,n,c){},79:function(e,n,c){},83:function(e,n,c){},84:function(e,n,c){},86:function(e,n,c){},87:function(e,n,c){},88:function(e,n,c){},89:function(e,n,c){},90:function(e,n,c){"use strict";c.r(n);var s=c(3),a=c(2),t=c.n(a),r=c(23),i=c.n(r),o=(c(74),c(75),c(29)),l=c(9),d=c(26),j=Object(d.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),b=j.actions,h=b.login,u=b.logout,m=function(e){return e.user.user},O=j.reducer,v=(c(79),Object(d.b)({name:"app",initialState:{serverId:null,serverName:null,channelId:null,channelName:null},reducers:{setServerInfo:function(e,n){e.serverId=n.payload.serverId,e.serverName=n.payload.serverName,e.channelId=null,e.channelName=null},setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}})),p=v.actions,x=p.setServerInfo,f=p.setChannelInfo,N=function(e){return e.app.serverId},_=function(e){return e.app.serverName},g=function(e){return e.app.channelId},I=function(e){return e.app.channelName},S=v.reducer,y=c(28),C=y.a.initializeApp({apiKey:"AIzaSyB05OmarqivGc5YTKUATgzXJ8Nz_IOuv9M",authDomain:"discord-clone-75157.firebaseapp.com",projectId:"discord-clone-75157",storageBucket:"discord-clone-75157.appspot.com",messagingSenderId:"538671599107",appId:"1:538671599107:web:1fe145eaebf8df167f8836",measurementId:"G-XDTQKXKTD7"}).firestore(),w=y.a.auth(),k=new y.a.auth.GoogleAuthProvider,z=C;var B=function(e){var n=e.serverId,c=e.serverName,a=e.photo,t=e.channels,r=e.setChannels,i=(Object(l.c)(m),Object(l.b)());return Object(s.jsx)("div",{className:"sidebar__server",onClick:function(){i(x({serverId:n,serverName:c})),z.collection("servers/"+n+"/channels").orderBy("channelName","asc").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))})),console.log(t)},children:Object(s.jsx)("img",{id:n,name:c,src:a||"",className:"sidebar__serverImg"})})},E=(c(83),c(44)),T=c.n(E),D=c(43),H=c.n(D);c(84);var A=function(e){var n=e.id,c=e.channelName,a=Object(l.b)();return Object(s.jsx)("div",{className:"sidebarChannel",onClick:function(){return a(f({channelId:n,channelName:c}))},children:Object(s.jsxs)("h4",{children:[Object(s.jsx)("span",{className:"sidebarChannel__hash",children:"#"}),c]})})},F=c(107),K=c(53),L=c.n(K),M=c(109),U=c(52),V=c.n(U),G=c(56),J=c.n(G),R=c(55),W=c.n(R),X=c(54),P=c.n(X);var q=function(){var e=Object(l.c)(m),n=Object(a.useState)([]),c=Object(o.a)(n,2),t=c[0],r=c[1],i=Object(a.useState)([]),d=Object(o.a)(i,2),j=d[0],b=d[1],h=Object(l.c)(N),u=Object(l.c)(_);return Object(a.useEffect)((function(){z.collection("servers").orderBy("serverName","asc").onSnapshot((function(e){return b(e.docs.map((function(e){return{id:e.id,server:e.data()}})))}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"sidebar__serverList",children:[j.map((function(e){return Object(s.jsx)(B,{serverId:e.id,serverName:e.server.serverName,photo:e.server.photo,channels:t,setChannels:r})})),Object(s.jsx)(H.a,{onClick:function(){var n=prompt("Enter a new server");if(n){var c=prompt("Enter photo URL");c&&z.collection("servers").add({serverName:n,photo:c,administrators:[{displayName:e.displayName,uid:e.uid}],moderators:[]})}},className:"sidebar__addServer"})]}),Object(s.jsxs)("div",{className:"sidebar",children:[Object(s.jsxs)("div",{className:"sidebar__top",children:[Object(s.jsx)("h3",{children:u}),Object(s.jsx)(T.a,{})]}),Object(s.jsxs)("div",{className:"sidebar__channels",children:[Object(s.jsxs)("div",{className:"sidebar__channelsHeader",children:[Object(s.jsxs)("div",{className:"sidebar__header",children:[Object(s.jsx)(T.a,{}),Object(s.jsx)("h4",{children:"Text Channels"})]}),Object(s.jsx)(H.a,{onClick:function(){var e=prompt("Enter a new channel");h&&e&&z.collection("servers/"+h+"/channels").add({channelName:e})},className:"sidebar__addChannel"})]}),Object(s.jsx)("div",{className:"sidebar__channelsList",children:t.map((function(e){var n=e.id,c=e.channel;return Object(s.jsx)(A,{id:n,channelName:c.channelName},n)}))})]}),Object(s.jsxs)("div",{className:"sidebar__voice",children:[Object(s.jsx)(F.a,{className:"sidebar__voiceIcon",fontSize:"large"}),Object(s.jsxs)("div",{className:"sidebar__voiceInfo",children:[Object(s.jsx)("h3",{children:"Voice Connected"}),Object(s.jsx)("p",{children:"Stream"})]}),Object(s.jsxs)("div",{className:"sidebar__voiceIcons",children:[Object(s.jsx)(V.a,{}),Object(s.jsx)(L.a,{})]})]}),Object(s.jsxs)("div",{className:"sidebar__profile",children:[Object(s.jsx)(M.a,{onClick:function(){return w.signOut()},src:e.photo}),Object(s.jsxs)("div",{className:"sidebar__profileInfo",children:[Object(s.jsx)("h3",{children:e.displayName}),Object(s.jsxs)("p",{children:["#",e.uid.substring(0,10)]})]}),Object(s.jsxs)("div",{className:"sidebar__profileIcons",children:[Object(s.jsx)(P.a,{}),Object(s.jsx)(W.a,{}),Object(s.jsx)(J.a,{})]})]})]})]})};c(86);var Q=function(e){var n=e.timestamp,c=e.message,a=e.user;return Object(s.jsxs)("div",{className:"message",children:[Object(s.jsx)(M.a,{src:a.photo}),Object(s.jsxs)("div",{className:"message__info",children:[Object(s.jsxs)("h4",{children:[a.displayName,Object(s.jsx)("span",{className:"message__timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]}),Object(s.jsx)("p",{children:c})]})]})},Y=(c(87),c(57)),$=c.n(Y),Z=c(58),ee=c.n(Z),ne=c(59),ce=c.n(ne),se=c(60),ae=c.n(se),te=c(61),re=c.n(te),ie=c(62),oe=c.n(ie);var le=function(e){var n=e.channelName;return Object(s.jsxs)("div",{className:"chatHeader",children:[Object(s.jsx)("div",{className:"chatHeader__left",children:Object(s.jsxs)("h3",{children:[Object(s.jsx)("span",{className:"chatHeader__hash",children:"#"}),n]})}),Object(s.jsxs)("div",{className:"chatHeader__right",children:[Object(s.jsx)($.a,{}),Object(s.jsx)(ee.a,{}),Object(s.jsx)(ce.a,{}),Object(s.jsxs)("div",{className:"chatHeader__search",children:[Object(s.jsx)("input",{placeholder:"Search"}),Object(s.jsx)(ae.a,{})]}),Object(s.jsx)(re.a,{}),Object(s.jsx)(oe.a,{})]})]})},de=(c(88),c(64)),je=c.n(de),be=c(65),he=c.n(be),ue=c(66),me=c.n(ue),Oe=c(63),ve=c.n(Oe);var pe=function(){var e=Object(a.useRef)(),n=Object(l.c)(m),c=(Object(l.c)(N),Object(l.c)(_),Object(l.c)(g)),t=Object(l.c)(I),r=Object(a.useState)(""),i=Object(o.a)(r,2),d=i[0],j=i[1],b=Object(a.useState)([]),h=Object(o.a)(b,2),u=h[0],O=h[1];return Object(a.useEffect)((function(){c&&(z.collection("channels").doc(c).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return O(e.docs.map((function(e){return e.data()})))})),e.current.scrollIntoView({behavior:"smooth"}))}),[c]),Object(s.jsxs)("div",{className:"chat",children:[Object(s.jsx)(le,{channelName:t}),Object(s.jsxs)("div",{className:"chat__messages",children:[u.map((function(e){return Object(s.jsx)(Q,{timestamp:e.timestamp,message:e.message,user:e.user})})),Object(s.jsx)("div",{ref:e})]}),Object(s.jsxs)("div",{className:"chat__input",children:[Object(s.jsx)(ve.a,{fontSize:"large"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{value:d,disabled:!c,onChange:function(e){return j(e.target.value)},placeholder:"Message #".concat(t)}),Object(s.jsx)("button",{disabled:!c,className:"chat__inputButton",type:"submit",onClick:function(s){s.preventDefault(),d&&""!=d.split(" ").join("")&&z.collection("channels").doc(c).collection("messages").add({timestamp:y.a.firestore.FieldValue.serverTimestamp(),message:d,user:n}),j(""),e.current.scrollIntoView({behavior:"smooth"})},children:"Send Message"})]}),Object(s.jsxs)("div",{className:"chat__inputIcons",children:[Object(s.jsx)(je.a,{fontSize:"large"}),Object(s.jsx)(he.a,{fontSize:"large"}),Object(s.jsx)(me.a,{fontSize:"large"})]})]})]})},xe=c(108);c(89);var fe=function(){return Object(s.jsxs)("div",{className:"login",children:[Object(s.jsx)("div",{className:"login__logo",children:Object(s.jsx)("img",{src:"/main_logo.png",alt:"app logo"})}),Object(s.jsx)(xe.a,{onClick:function(){w.signInWithPopup(k).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})};var Ne=function(){var e=Object(l.b)(),n=Object(l.c)(m);return Object(a.useEffect)((function(){w.onAuthStateChanged((function(n){e(n?h({uid:n.uid,photo:n.photoURL,email:n.email,displayName:n.displayName}):u())}))}),[e]),Object(s.jsx)("div",{className:"app",children:n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(q,{}),Object(s.jsx)(pe,{})]}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(fe,{})})})},_e=Object(d.a)({reducer:{user:O,app:S}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(s.jsx)(t.a.StrictMode,{children:Object(s.jsx)(l.a,{store:_e,children:Object(s.jsx)(Ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[90,1,2]]]);
//# sourceMappingURL=main.784c4463.chunk.js.map