(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{74:function(e,n,a){},75:function(e,n,a){},79:function(e,n,a){},83:function(e,n,a){},84:function(e,n,a){},86:function(e,n,a){},87:function(e,n,a){},88:function(e,n,a){},89:function(e,n,a){},90:function(e,n,a){"use strict";a.r(n);var s=a(3),c=a(2),t=a.n(c),r=a(23),i=a.n(r),l=(a(74),a(75),a(25)),o=a(9),d=a(27),j=Object(d.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),b=j.actions,h=b.login,u=b.logout,m=function(e){return e.user.user},O=j.reducer,p=(a(79),Object(d.b)({name:"app",initialState:{serverId:null,serverName:null,channelId:null,channelName:null},reducers:{setServerInfo:function(e,n){e.serverId=n.payload.serverId,e.serverName=n.payload.serverName,e.channelId=null,e.channelName=null},setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}})),v=p.actions,f=v.setServerInfo,x=v.setChannelInfo,N=function(e){return e.app.serverId},g=function(e){return e.app.serverName},_=function(e){return e.app.channelId},I=function(e){return e.app.channelName},S=p.reducer,y=a(29),C=y.a.initializeApp({apiKey:"AIzaSyB05OmarqivGc5YTKUATgzXJ8Nz_IOuv9M",authDomain:"discord-clone-75157.firebaseapp.com",projectId:"discord-clone-75157",storageBucket:"discord-clone-75157.appspot.com",messagingSenderId:"538671599107",appId:"1:538671599107:web:1fe145eaebf8df167f8836",measurementId:"G-XDTQKXKTD7"}).firestore(),w=y.a.auth(),k=new y.a.auth.GoogleAuthProvider,z=C;var B=function(e){var n=e.serverId,a=e.serverName,c=e.photo,t=e.channels,r=e.setChannels,i=(Object(o.c)(m),Object(o.b)());return Object(s.jsx)("div",{className:"sidebar__server",onClick:function(){i(f({serverId:n,serverName:a})),z.collection("servers/"+n+"/channels").orderBy("channelName","asc").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))})),console.log(t)},children:Object(s.jsx)("img",{id:n,name:a,src:c||"",className:"sidebar__serverImg"})})},E=(a(83),a(44)),T=a.n(E),D=a(43),H=a.n(D);a(84);var A=function(e){var n=e.id,a=e.channelName,c=Object(o.b)();return Object(s.jsx)("div",{className:"sidebarChannel",onClick:function(){return c(x({channelId:n,channelName:a}))},children:Object(s.jsxs)("h4",{children:[Object(s.jsx)("span",{className:"sidebarChannel__hash",children:"#"}),a]})})},F=a(107),M=a(53),K=a.n(M),L=a(109),U=a(52),V=a.n(U),G=a(56),J=a.n(G),R=a(55),W=a.n(R),X=a(54),P=a.n(X);var q=function(){var e=Object(o.c)(m),n=Object(c.useState)([]),a=Object(l.a)(n,2),t=a[0],r=a[1],i=Object(c.useState)([]),d=Object(l.a)(i,2),j=d[0],b=d[1],h=Object(o.c)(N),u=Object(o.c)(g);return Object(c.useEffect)((function(){z.collection("servers").orderBy("serverName","asc").onSnapshot((function(e){return b(e.docs.map((function(e){return{id:e.id,server:e.data()}})))}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"sidebar__serverList",children:[j.map((function(e){return Object(s.jsx)(B,{serverId:e.id,serverName:e.server.serverName,photo:e.server.photo,channels:t,setChannels:r})})),Object(s.jsx)(H.a,{onClick:function(){var n=prompt("Enter a new server");if(n){var a=prompt("Enter photo URL");a&&z.collection("servers").add({serverName:n,photo:a,administrators:[{displayName:e.displayName,uid:e.uid}],moderators:[]})}},className:"sidebar__addServer"})]}),Object(s.jsxs)("div",{className:"sidebar",children:[Object(s.jsxs)("div",{className:"sidebar__top",children:[Object(s.jsx)("h3",{children:u}),Object(s.jsx)(T.a,{})]}),Object(s.jsxs)("div",{className:"sidebar__channels",children:[Object(s.jsxs)("div",{className:"sidebar__channelsHeader",children:[Object(s.jsxs)("div",{className:"sidebar__header",children:[Object(s.jsx)(T.a,{}),Object(s.jsx)("h4",{children:"Text Channels"})]}),Object(s.jsx)(H.a,{onClick:function(){var e=prompt("Enter a new channel");h&&e&&z.collection("servers/"+h+"/channels").add({channelName:e})},className:"sidebar__addChannel"})]}),Object(s.jsx)("div",{className:"sidebar__channelsList",children:t.map((function(e){var n=e.id,a=e.channel;return Object(s.jsx)(A,{id:n,channelName:a.channelName},n)}))})]}),Object(s.jsxs)("div",{className:"sidebar__voice",children:[Object(s.jsx)(F.a,{className:"sidebar__voiceIcon",fontSize:"large"}),Object(s.jsxs)("div",{className:"sidebar__voiceInfo",children:[Object(s.jsx)("h3",{children:"Voice Connected"}),Object(s.jsx)("p",{children:"Stream"})]}),Object(s.jsxs)("div",{className:"sidebar__voiceIcons",children:[Object(s.jsx)(V.a,{}),Object(s.jsx)(K.a,{})]})]}),Object(s.jsxs)("div",{className:"sidebar__profile",children:[Object(s.jsx)(L.a,{onClick:function(){return w.signOut()},src:e.photo}),Object(s.jsxs)("div",{className:"sidebar__profileInfo",children:[Object(s.jsx)("h3",{children:e.displayName}),Object(s.jsxs)("p",{children:["#",e.uid.substring(0,10)]})]}),Object(s.jsxs)("div",{className:"sidebar__profileIcons",children:[Object(s.jsx)(P.a,{}),Object(s.jsx)(W.a,{}),Object(s.jsx)(J.a,{})]})]})]})]})};a(86);var Q=function(e){var n=e.timestamp,a=e.message,c=e.user;return Object(s.jsxs)("div",{className:"message",children:[Object(s.jsx)(L.a,{src:c.photo}),Object(s.jsxs)("div",{className:"message__info",children:[Object(s.jsxs)("h4",{children:[c.displayName,Object(s.jsx)("span",{className:"message__timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]}),Object(s.jsx)("p",{children:a})]})]})},Y=(a(87),a(57)),$=a.n(Y),Z=a(58),ee=a.n(Z),ne=a(59),ae=a.n(ne),se=a(60),ce=a.n(se),te=a(61),re=a.n(te),ie=a(62),le=a.n(ie);var oe=function(e){var n=e.channelName;return Object(s.jsxs)("div",{className:"chatHeader",children:[Object(s.jsx)("div",{className:"chatHeader__left",children:Object(s.jsxs)("h3",{children:[Object(s.jsx)("span",{className:"chatHeader__hash",children:"#"}),n]})}),Object(s.jsxs)("div",{className:"chatHeader__right",children:[Object(s.jsx)($.a,{}),Object(s.jsx)(ee.a,{}),Object(s.jsx)(ae.a,{}),Object(s.jsxs)("div",{className:"chatHeader__search",children:[Object(s.jsx)("input",{placeholder:"Search"}),Object(s.jsx)(ce.a,{})]}),Object(s.jsx)(re.a,{}),Object(s.jsx)(le.a,{})]})]})},de=(a(88),a(64)),je=a.n(de),be=a(65),he=a.n(be),ue=a(66),me=a.n(ue),Oe=a(63),pe=a.n(Oe);var ve=function(){var e=Object(c.useRef)(),n=Object(o.c)(m),a=Object(o.c)(N),r=Object(o.c)(_),i=Object(o.c)(I),d=Object(c.useState)(""),j=Object(l.a)(d,2),b=j[0],h=j[1],u=Object(c.useState)([]),O=Object(l.a)(u,2),p=O[0],v=O[1],f=Object(c.useState)(null),x=Object(l.a)(f,2),g=x[0],S=x[1],C=Object(c.useState)("#Message "+i),w=Object(l.a)(C,2),k=w[0],B=w[1];return Object(c.useEffect)((function(){r&&(z.collection("servers/"+a+"/channels").doc(r).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return v(e.docs.map((function(e){return e.data()})))})),e.current.scrollIntoView({behavior:"smooth"}))}),[r]),Object(s.jsxs)("div",{className:"chat",children:[Object(s.jsx)(oe,{channelName:i}),Object(s.jsxs)("div",{className:"chat__messages",children:[p.map((function(e){return Object(s.jsx)(Q,{timestamp:e.timestamp,message:e.message,user:e.user})})),Object(s.jsx)("div",{ref:e})]}),Object(s.jsxs)("div",{className:"chat__input",children:[Object(s.jsx)("input",{type:"file",id:"att_file",name:"att_file",accept:"image/x-png,image/gif,image/jpeg",files:g,onChange:function(e){S(e.target.files[0]),B(e.target.files[0].name)}}),t.a.createElement("label",{htmlFor:"att_file"},Object(s.jsx)(pe.a,{fontSize:"large"})),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{value:b,disabled:!r,onChange:function(e){return h(e.target.value)},placeholder:k}),Object(s.jsx)("button",{disabled:!r,className:"chat__inputButton",type:"submit",onClick:function(s){s.preventDefault(),b&&""!=b.split(" ").join("")&&z.collection("servers/"+a+"/channels").doc(r).collection("messages").add({timestamp:y.a.firestore.FieldValue.serverTimestamp(),message:b,user:n}),h(""),S(null),B("#Message "+i),e.current.scrollIntoView({behavior:"smooth"})},children:"Send Message"})]}),Object(s.jsxs)("div",{className:"chat__inputIcons",children:[Object(s.jsx)(je.a,{fontSize:"large"}),Object(s.jsx)(he.a,{fontSize:"large"}),Object(s.jsx)(me.a,{fontSize:"large"})]})]})]})},fe=a(108);a(89);var xe=function(){return Object(s.jsxs)("div",{className:"login",children:[Object(s.jsx)("div",{className:"login__logo",children:Object(s.jsx)("img",{src:"/main_logo.png",alt:"app logo"})}),Object(s.jsx)(fe.a,{onClick:function(){w.signInWithPopup(k).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})};var Ne=function(){var e=Object(o.b)(),n=Object(o.c)(m);return Object(c.useEffect)((function(){w.onAuthStateChanged((function(n){e(n?h({uid:n.uid,photo:n.photoURL,email:n.email,displayName:n.displayName}):u())}))}),[e]),Object(s.jsx)("div",{className:"app",children:n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(q,{}),Object(s.jsx)(ve,{})]}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(xe,{})})})},ge=Object(d.a)({reducer:{user:O,app:S}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(s.jsx)(t.a.StrictMode,{children:Object(s.jsx)(o.a,{store:ge,children:Object(s.jsx)(Ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[90,1,2]]]);
//# sourceMappingURL=main.994d9208.chunk.js.map